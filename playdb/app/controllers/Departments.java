package controllers;

import com.fasterxml.jackson.databind.JsonNode;
import play.libs.Json;
import play.mvc.*;
import play.data.*;
import static play.data.Form.*;

import views.html.*;

import models.*;

import com.avaje.ebean.*;

import java.util.*;

/**
 * Manage a database of computers
 */
public class Departments extends Controller {

 public static Result tree() {

        List<Department> dep=Department.find.all();

     String s="{\"treeNodes\":";
     String e="}";
     return ok(  s+Json.toJson(dep)+e);

        }

    public static Result list() {

        List<Department> dep=Department.find.all();

        String s="{\"treeNodes\":";
        String e="}";

        //String f="{\"treeNodes\":[{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"手术室\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30019,\"EngineerID\":20010,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":20053,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"设备科\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30089,\"EngineerID\":20062,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"院长室\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30478,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"CT室\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30480,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"病理科\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30481,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"彩超室\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30482,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"测听室\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30483,\"EngineerID\":20061,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":20185,\"NurseStationTel\":\"1234567\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"放射科\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30484,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"喉科病房\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30485,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"急诊科\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30486,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"康复科\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30487,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"康复科病房\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30488,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"理疗室\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30489,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"内镜室\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30490,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"内科病房\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30491,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"手术麻醉科\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30492,\"EngineerID\":20010,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":20059,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"外科病房\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30493,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"胃镜室\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30494,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"心电图室\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30495,\"EngineerID\":20178,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":20176,\"NurseStationTel\":\"05311234567\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"眼科门诊\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30496,\"EngineerID\":0,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":0,\"NurseStationTel\":\"1\"},{\"drop\":false,\"icon\":\"../libs/icons/user_group.gif\",\"name\":\"检验科\",\"clickExpand\":false,\"url\":\"\",\"parentId\":0,\"Ord\":0,\"checked\":false,\"drag\":false,\"Remark\":\"\",\"oldParentId\":0,\"iconClose\":\"\",\"open\":true,\"target\":\"\",\"chkDisabled\":false,\"id\":30502,\"EngineerID\":20061,\"click\":\"\",\"existed\":true,\"iconOpen\":\"\",\"ManagerID\":20114,\"NurseStationTel\":\"\"}] }";
        return ok(  s+Json.toJson(dep)+e);
        //return ok( f );

    }

    /*
    {"treeNodes":[{"drop":false,"icon":"../libs/icons/user_group.gif","name":"设备公共库","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30001,"EngineerID":20035,"click":"","existed":true,"iconOpen":"","ManagerID":20035,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"手术室","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30019,"EngineerID":20010,"click":"","existed":true,"iconOpen":"","ManagerID":20053,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"设备科","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30089,"EngineerID":20062,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"院长室","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30478,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"CT室","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30480,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"病理科","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30481,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"彩超室","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30482,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"测听室","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30483,"EngineerID":20061,"click":"","existed":true,"iconOpen":"","ManagerID":20185,"NurseStationTel":"1234567"},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"放射科","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30484,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"喉科病房","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30485,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"急诊科","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30486,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"康复科","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30487,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"康复科病房","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30488,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"理疗室","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30489,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"内镜室","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30490,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"内科病房","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30491,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"手术麻醉科","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30492,"EngineerID":20010,"click":"","existed":true,"iconOpen":"","ManagerID":20059,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"外科病房","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30493,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"胃镜室","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30494,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":""},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"心电图室","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30495,"EngineerID":20178,"click":"","existed":true,"iconOpen":"","ManagerID":20176,"NurseStationTel":"05311234567"},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"眼科门诊","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30496,"EngineerID":0,"click":"","existed":true,"iconOpen":"","ManagerID":0,"NurseStationTel":"1"},{"drop":false,"icon":"../libs/icons/user_group.gif","name":"检验科","clickExpand":false,"url":"","parentId":0,"Ord":0,"checked":false,"drag":false,"Remark":"","oldParentId":0,"iconClose":"","open":true,"target":"","chkDisabled":false,"id":30502,"EngineerID":20061,"click":"","existed":true,"iconOpen":"","ManagerID":20114,"NurseStationTel":""}] }
     */

    public static Result save() {
        JsonNode json = request().body().asJson();
        if (json == null) {
            return badRequest("Experting Json Data");
        }else {

            Department d=Json.fromJson(json,Department.class);
            d.save();
            return ok();
        }


    }

    public static Result SearchRepairPerson (Long id){

         Department dev = Department.find.byId(id);


        // String s="{\"pager.totalRows\":"+"1"+",\"sort\":\"id\",\"rows\":";
        // String e=",\"id\":\"desc\",\"pager.pageNo\":1}";

//        return ok(  s+Json.toJson(dev)+e );
        return ok( "" );

    }

}