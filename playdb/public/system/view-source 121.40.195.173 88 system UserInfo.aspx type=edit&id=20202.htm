

<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>设备日常管理</title>
<!--框架必需start-->
<script type="text/javascript" src="../libs/js/jquery.js"></script>
<script type="text/javascript" src="../libs/js/language/cn.js"></script>
<script type="text/javascript" src="../libs/js/framework.js"></script>
<link href="../libs/css/import_basic.css" rel="stylesheet" type="text/css"/>
<link rel="stylesheet" type="text/css" id="skin" prePath="../"/>
<link rel="stylesheet" type="text/css" id="customSkin"/>
<!--框架必需end-->

<!-- 日期控件start -->
<script type="text/javascript" src="../libs/js/form/datePicker/WdatePicker.js"></script>
<!-- 日期控件end -->

<!-- 树组件start -->
<script type="text/javascript" src="../libs/js/tree/ztree/ztree.js"></script>
<link type="text/css" rel="stylesheet" href="../libs/js/tree/ztree/ztree.css"></link>
<!-- 树组件end -->

<!-- 树形下拉框start -->
<script type="text/javascript" src="../libs/js/form/selectTree.js"></script>
<!-- 树形下拉框end -->

<!-- 表单验证start -->
<script src="../libs/js/form/validationRule.js" type="text/javascript"></script>
<script src="../libs/js/form/validation.js" type="text/javascript"></script>
<!-- 表单验证end -->

    <script type="text/javascript">
        $(function () {
            if ('1'=="1") {
                $("input:radio[name=age-2]").eq(0).attr("checked", true);
            } else {
                $("input:radio[name=age-2]").eq(1).attr("checked", true);
            }
        });
        function initComplete() {
           
            $("#Department").setValue('30089');
            $("#txtManager").setValue('');
            if ("30089" != "") {
              $("#txtCode").attr("readonly", "readonly")//将input元素设置为readonly
            }
            $("#btnSave").click(function () {
                //alert($("#Department").attr("relValue"));
                if ($("#txtCode").val() == "") {
                    top.Dialog.alert("请输入用户帐号！");
                    return false;
                }
                if ($("#txtName").val() == "") {
                    top.Dialog.alert("请输入用户名称！");
                    return false;
                }

                if ($("#txtPassword").val() == "" && 'edit' == "add") {
                    top.Dialog.alert("密码不能为空！");
                    return false;
                }

                if (($("#txtPassword").val().length < 6 || $("#txtPassword").val().length > 20) && $("#txtPassword").val()!="") {
                    top.Dialog.alert("密码长度请保持为6-20位！");
                    return false;
                }

                if ($("#Department").attr("relValue") == "") {
                    top.Dialog.alert("请选择科室！");
                    return false;

                }

                //alert($("#ddlRoleId").val());
                var user = {}
                user.ID = $("#hdUserID").val();
                user.Code = $("#txtCode").val();
                user.Name = $("#txtName").val();
                user.Dept = $("#Department").attr("relValue");
                user.Gender = $("input:radio[name=age-2]").filter("[checked]").val();
                user.Pwd = $("#txtPassword").val();
                user.Positions = $("#txtPositions").val();
                user.Manager = $("#txtManager").attr("relValue");
                user.Mobile = $("#txtMobile").val();
                user.Tel = $("#txtTel").val();
                user.Email = $("#txtEmail").val();
                user.Birthday = $("#txtBirthday").val();
                user.Reamrk = $("#txtReamrk").val();
                user.Email = $("#txtEmail").val();
                user.RoleId = $("#ddlRoleId").val();
                $.ajax({
                    type: 'POST',
                    url: '../Handler/Users.ashx',
                    dataType: 'json',
                    data: {
                        type: "Save",
                        data: user
                    },
                    success: function (result) {
                        top.frmright.page_237.refresh();
                        top.Dialog.close(); ;
                    },
                    error: function (a) {
                        top.Dialog.alert("访问服务器端出错！");
                    }
                });
            })
            $("#btnCancel").click(function () {
                try {
                    top.frmright.page_237.refresh();
                    top.Dialog.close();
                }
                catch (e) {
                }
            })
        }
    </script>
</head>
<body>
    <form method="post" action="UserInfo.aspx?type=edit&amp;id=20202" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTMwNTU3MjYxMQ9kFgJmD2QWBAIBDw8WBB4EVGV4dAUGeGpybXl5HgdFbmFibGVkaGRkAhAPEA8WBh4NRGF0YVRleHRGaWVsZAUIUm9sZU5hbWUeDkRhdGFWYWx1ZUZpZWxkBQJJZB4LXyFEYXRhQm91bmRnZBAVDAnnrqHnkIblkZgP6L+Q57u05bel56iL5biIDOenkeWupOS4u+S7uw/orr7lpIfnp5HkuLvku7sN5Yy755SfL+aKpOWjqwzmioDmnK/nu4/nkIYM6L+Q57u057uP55CGDOWVhuWKoeS6uuWRmAbpmaLplb8M5oC7566h55CG5ZGYDOa1i+ivleadg+mZkAnmiqTlo6vplb8VDAQzMDAwBDMwMDEEMzAwMgQzMDAzBDMwMDQEMzAwOQQzMDg5BDMwOTIEMzA5MwQzMDk0BDMwOTUEMzA5ORQrAwxnZ2dnZ2dnZ2dnZ2dkZGSjCk8Vv/5K9ozBOwdVRA5ZLKNc110188+QN/H4yrY7Jg==" />
</div>

<div class="aspNetHidden">

	<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
	<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
	<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWGAKz0Y6XDALChPzDDQKFiqicCwLEhISFCwK1qbSRCwKd/LDeDwKxhYrZCQKL+4qxCwKE8/26DALcs4H0DQLcs/XfCgLcs+miAwLcs92FCALcs7FpAtyzlXYCtPmmqAYCkdCYzwoCkdCMkgMCkdDg9QsCkdDUWAKR0MSCCAKk7sHMBQKF4fK1DQKct7iSDChtgN8N3CKxLSPwbNEQAHmzF4hxkA5R/3ld+WkhQgfK" />
</div>
    <div id="scrollContent">
        <div class="box1" panelwidth="100%">
            <fieldset>
                <legend>基础信息</legend>
                <table class="tableStyle" formmode="transparent" footer="normal">
                    <tr>
                        <td width="15%">
                            员工账号：
                        </td>
                        <td width="35%">
                            <input name="txtCode" type="text" value="xjrmyy" onchange="javascript:setTimeout(&#39;__doPostBack(\&#39;txtCode\&#39;,\&#39;\&#39;)&#39;, 0)" onkeypress="if (WebForm_TextBoxKeyHandler(event) == false) return false;" id="txtCode" disabled="disabled" class="aspNetDisabled validate[required,length[3,20]]" /><input type="hidden" name="hdUserID" id="hdUserID" value="20202" />
                            <span style="color: red">*</span>
                        </td>
                        <td width="15%">
                            员工姓名：
                        </td>
                        <td>
                            <input name="txtName" type="text" value="test" id="txtName" class="validate[required,length[2,20]]" />
                            <span style="color: red">*</span>
                        </td>
                    </tr>
                    <tr>
                        <td width="15%">
                            密码：
                        </td>
                        <td width="35%">
                            <input name="txtPassword" type="password" id="txtPassword" />
                            <span style="color: red">*</span>
                        </td>
                        <td width="15%">
                            科室部门：
                        </td>
                        <td>
                            <div class="selectTree validate[required]" selectedValue="" id="Department" url="../Handler/Departments.ashx?Command=List"></div>
                            <span style="color: red">*</span>
                        </td>
                    </tr>
                    <tr>
                        <td width="15%">
                            职务：
                        </td>
                        <td width="35%">
                            <input name="txtPositions" type="text" id="txtPositions" />
                        </td>
                        <td width="15%">
                            上级主管：
                        </td>
                        <td>
                            <div class="selectTree validate[required]" selectedValue="" id="txtManager" url="../Handler/Users.ashx?Type=UserDepartments"></div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            移动电话：
                        </td>
                        <td>
                            <input name="txtMobile" type="text" id="txtMobile" />
                        </td>
                        <td>
                            办公电话：
                        </td>
                        <td>
                            <input name="txtTel" type="text" id="txtTel" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Email：
                        </td>
                        <td>
                            <input name="txtEmail" type="text" id="txtEmail" />
                        </td>
                        <td>权限组：</td>
			            <td><select name="ddlRoleId" id="ddlRoleId">
	<option value="3000">管理员</option>
	<option value="3001">运维工程师</option>
	<option selected="selected" value="3002">科室主任</option>
	<option value="3003">设备科主任</option>
	<option value="3004">医生/护士</option>
	<option value="3009">技术经理</option>
	<option value="3089">运维经理</option>
	<option value="3092">商务人员</option>
	<option value="3093">院长</option>
	<option value="3094">总管理员</option>
	<option value="3095">测试权限</option>
	<option value="3099">护士长</option>

</select></td>
                    </tr>
                </table>
            </fieldset>
            <fieldset id="Fieldset1">
                <legend>个人信息</legend>
                <table class="tableStyle" formmode="transparent" footer="normal">
                    <tr>
                        <td width="15%">
                            性别：
                        </td>
                        <td>
                            <input type="radio" id="Radio3" name="age-2" value="1" checked="checked" /><label
                                for="lt25-2" class="hand">男</label>
                            <input type="radio" id="Radio4" name="age-2" value="0" /><label for="gt25-2" class="hand">女</label>
                        </td>
                        <td width="15%">
                            生日：
                        </td>
                        <td width="35%">
                            <input name="txtBirthday" type="text" id="txtBirthday" class="date validate[custom[date]]" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            备注：
                        </td>
                        <td colspan="3">
                            <textarea name="txtReamrk" rows="2" cols="20" id="txtReamrk" style="height:40px;width:100%;">
</textarea>
                        </td>
                    </tr>
                </table>
            </fieldset>
            <div class="height_5">
            </div>
            <div class="padding_top10">
                <table class="tableStyle" formmode="transparent">
                    <tr>
                        <td colspan="4">
                            <input name="btnSave" type="button" id="btnSave" value="保 存" class="button" />
                            <input type="button" value="返 回" class="button" id="btnCancel" />
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    
<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['form1'];
if (!theForm) {
    theForm = document.form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

</form>
</body>
</html>
